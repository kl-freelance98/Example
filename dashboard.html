<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutor Job Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f8f9fa;
        }
        .table-container {
            width: 100%;
            overflow-x: auto;
            max-height: calc(100vh - 200px); /* Adjust height based on your layout */
        }
        table {
            border-collapse: separate;
            border-spacing: 0;
        }
        th, td {
            border: 1px solid #e0e0e0;
            padding: 8px 12px;
            white-space: nowrap;
        }
        th {
            background-color: #f2f2f2;
            position: sticky;
            top: 0;
            z-index: 10;
            font-weight: 500;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
        }
        .status-open { background-color: #dcfce7; color: #166534; }
        .status-matched { background-color: #dbeafe; color: #1e40af; }
        .status-closed { background-color: #e5e7eb; color: #374151; }
        .modal {
            display: none; /* Hidden by default */
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
        }
    </style>
</head>
<body class="p-4 md:p-6">

    <div class="max-w-7xl mx-auto bg-white rounded-lg shadow-md p-6">
        <!-- Header Section -->
        <div class="flex flex-col md:flex-row items-center justify-between mb-4 gap-4">
            <h1 class="text-2xl font-bold text-gray-700">üìã Tutor Job Dashboard</h1>
            <div class="flex items-center gap-2">
                <button id="add-new-job-btn" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition duration-200 shadow">
                    + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
                </button>
                <button onclick="window.location.reload()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200 shadow">
                    ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
                </button>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="flex flex-col md:flex-row items-center gap-4 mb-4 p-4 bg-gray-50 rounded-lg">
            <div class="relative flex-grow w-full md:w-auto">
                <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô, ‡∏£‡∏´‡∏±‡∏™, ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." class="w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>
            <select id="statusFilter" class="w-full md:w-auto border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="all">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                <option value="OPEN">‡∏ß‡πà‡∏≤‡∏á (Open)</option>
                <option value="MATCHED">‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß (Matched)</option>
                <option value="CLOSED">‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Closed)</option>
            </select>
        </div>

        <!-- Table Container -->
        <div class="table-container border rounded-lg">
            <table class="w-full text-sm text-left text-gray-600">
                <thead class="text-xs text-gray-700 uppercase">
                    <tr>
                        <th class="px-6 py-3">‡∏£‡∏´‡∏±‡∏™‡∏á‡∏≤‡∏ô</th>
                        <th class="px-6 py-3">‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô</th>
                        <th class="px-6 py-3">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                        <th class="px-6 py-3">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        <th class="px-6 py-3">‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</th>
                        <th class="px-6 py-3">‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</th>
                        <th class="px-6 py-3 text-center">Actions</th>
                    </tr>
                </thead>
                <tbody id="job-table-body">
                    <!-- Data will be inserted here by JavaScript -->
                </tbody>
            </table>
             <div id="no-results" class="text-center p-8 text-gray-500 hidden">
                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </div>
        </div>
    </div>

    <!-- Applicants Modal -->
    <div id="applicants-modal" class="modal">
        <div class="modal-overlay" onclick="closeModal('applicants-modal')"></div>
        <div class="modal-content bg-white w-11/12 md:max-w-2xl mx-auto rounded-lg shadow-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£: <span id="modal-job-title"></span></h2>
                    <button onclick="closeModal('applicants-modal')" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
                </div>
                <div id="applicants-list" class="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
                    <!-- Applicant items will be inserted here -->
                </div>
            </div>
        </div>
    </div>
    
     <!-- Add New Job Modal -->
    <div id="add-job-modal" class="modal">
        <div class="modal-overlay" onclick="closeModal('add-job-modal')"></div>
        <div class="modal-content bg-white w-11/12 md:max-w-lg mx-auto rounded-lg shadow-lg">
            <form id="add-job-form" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
                    <button type="button" onclick="closeModal('add-job-modal')" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label for="job-title" class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô</label>
                        <input type="text" id="job-title" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="customer-name" class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                        <input type="text" id="customer-name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                     <div>
                        <label for="job-description" class="block text-sm font-medium text-gray-700">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</label>
                        <textarea id="job-description" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                </div>
                <div class="mt-6 flex justify-end gap-3">
                    <button type="button" onclick="closeModal('add-job-modal')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô</button>
                </div>
            </form>
        </div>
    </div>


<script>
    // Mock Data - ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏°‡∏≤‡∏à‡∏≤‡∏Å API
    const mockJobs = [
        { 
            id: 'M001', 
            title: '‡∏ï‡∏¥‡∏ß‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°.3', 
            customer: '‡∏ô‡πâ‡∏≠‡∏á‡∏ß‡∏¥‡∏ô', 
            status: 'OPEN', 
            applicants: [
                { name: '‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏®‡∏£‡∏µ', time: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå, ‡∏û‡∏∏‡∏ò (9:00-11:00)', note: '‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏≠‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ä‡πâ‡∏≤‡∏Ñ‡πà‡∏∞' },
                { name: '‡∏Ñ‡∏£‡∏π‡∏°‡∏≤‡∏ô‡∏∞', time: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£, ‡∏û‡∏§‡∏´‡∏±‡∏™ (18:00-20:00)', note: '‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≠‡∏ô ‡∏°.3 ‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏î‡∏±‡∏á' },
                { name: '‡∏Ñ‡∏£‡∏π‡πÉ‡∏à‡∏î‡∏µ', time: '‡πÄ‡∏™‡∏≤‡∏£‡πå-‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå (‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô)', note: '‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏∞‡∏î‡∏ß‡∏Å' }
            ], 
            assignedTutor: null 
        },
        { 
            id: 'E015', 
            title: '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏™‡∏ô‡∏ó‡∏ô‡∏≤', 
            customer: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢', 
            status: 'MATCHED', 
            applicants: [
                { name: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏î‡∏ß‡∏¥‡∏î', time: '‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô (19:00 ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ)', note: '‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏©‡∏≤ ‡∏™‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏á British' },
                { name: '‡∏Ñ‡∏£‡∏π‡πÅ‡∏≠‡∏ô‡∏ô‡∏≤', time: '‡πÄ‡∏™‡∏≤‡∏£‡πå-‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå (13:00-18:00)', note: '‡πÄ‡∏ô‡πâ‡∏ô‡∏™‡∏≠‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô' }
            ], 
            assignedTutor: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏î‡∏ß‡∏¥‡∏î' 
        },
        { 
            id: 'SC007', 
            title: '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏õ.6 ‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤', 
            customer: '‡∏ô‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÉ‡∏™', 
            status: 'OPEN', 
            applicants: [
                { name: '‡∏Ñ‡∏£‡∏π‡∏ß‡∏¥‡∏ó‡∏¢‡πå', time: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå, ‡∏®‡∏∏‡∏Å‡∏£‡πå (16:00-18:00)', note: '‡∏°‡∏µ‡∏ä‡∏µ‡∏ó‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏∞' },
                { name: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏õ‡∏¥‡πâ‡∏•', time: '‡∏û‡∏∏‡∏ò (15:00-19:00)', note: '‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÉ‡∏´‡∏ç‡πà' },
                { name: '‡∏Ñ‡∏£‡∏π‡∏≠‡πâ‡∏≠‡∏°', time: '‡πÄ‡∏™‡∏≤‡∏£‡πå (9:00-12:00)', note: '‡∏£‡∏±‡∏ö‡∏™‡∏≠‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô' },
                { name: '‡∏Ñ‡∏£‡∏π‡∏ö‡∏≠‡∏¢', time: '‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô (‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≥)', note: '‡∏û‡∏≠‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≠‡∏ô‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡∏û‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞' }
            ], 
            assignedTutor: null 
        },
        { id: 'JP002', title: '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô', customer: '‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏£‡∏¥‡∏™‡∏≤', status: 'CLOSED', applicants: [{ name: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏π‡∏≠‡∏¥', time: '‡πÄ‡∏™‡∏≤‡∏£‡πå (‡∏ö‡πà‡∏≤‡∏¢)', note: '‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß' }], assignedTutor: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏π‡∏≠‡∏¥' },
        { id: 'TH021', title: '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢ (PAT5)', customer: '‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥', status: 'MATCHED', applicants: [{ name: '‡∏Ñ‡∏£‡∏π‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢', time: '‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå (‡∏ö‡πà‡∏≤‡∏¢)', note: '‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏≠‡∏ô' }, { name: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏≠‡∏Å', time: '‡πÄ‡∏™‡∏≤‡∏£‡πå (‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô)', note: '‡∏°‡∏µ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß' }], assignedTutor: '‡∏Ñ‡∏£‡∏π‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢' },
        { id: 'E016', title: 'TOEIC 800+', customer: '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á', status: 'OPEN', applicants: [], assignedTutor: null },
        { id: 'CH005', title: '‡∏ï‡∏¥‡∏ß‡∏à‡∏µ‡∏ô HSK4', customer: '‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏¢‡∏î‡πå', status: 'CLOSED', applicants: [{ name: '‡∏Ñ‡∏£‡∏π‡∏´‡∏•‡∏¥‡∏ô', time: '‡∏ï‡∏≤‡∏°‡∏ï‡∏Å‡∏•‡∏á', note: '‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß' }], assignedTutor: '‡∏Ñ‡∏£‡∏π‡∏´‡∏•‡∏¥‡∏ô' },
    ];

    const jobTableBody = document.getElementById('job-table-body');
    const searchInput = document.getElementById('searchInput');
    const statusFilter = document.getElementById('statusFilter');
    const noResultsDiv = document.getElementById('no-results');

    const statusClasses = {
        'OPEN': 'status-open',
        'MATCHED': 'status-matched',
        'CLOSED': 'status-closed'
    };
    
    const statusText = {
        'OPEN': '‡∏ß‡πà‡∏≤‡∏á',
        'MATCHED': '‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß',
        'CLOSED': '‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß'
    };

    function renderTable(jobs) {
        jobTableBody.innerHTML = '';
        if (jobs.length === 0) {
            noResultsDiv.style.display = 'block';
            return;
        }
        noResultsDiv.style.display = 'none';

        jobs.forEach(job => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td class="px-6 py-4 font-medium text-gray-900">${job.id}</td>
                <td class="px-6 py-4">${job.title}</td>
                <td class="px-6 py-4">${job.customer}</td>
                <td class="px-6 py-4">
                    <span class="status-badge ${statusClasses[job.status]}">${statusText[job.status]}</span>
                </td>
                <td class="px-6 py-4 text-center">${job.applicants.length} ‡∏Ñ‡∏ô</td>
                <td class="px-6 py-4">${job.assignedTutor || '-'}</td>
                <td class="px-6 py-4 text-center">
                    ${job.status === 'OPEN' && job.applicants.length > 0 ? 
                    `<button onclick="viewApplicants('${job.id}')" class="text-blue-600 hover:text-blue-800 font-medium">‡∏î‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>` : 
                    (job.status === 'OPEN' ? '<span class="text-gray-400">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</span>' : '<span class="text-gray-400">-</span>')}
                </td>
            `;
            jobTableBody.appendChild(tr);
        });
    }

    function filterData() {
        const searchTerm = searchInput.value.toLowerCase();
        const status = statusFilter.value;

        const filteredJobs = mockJobs.filter(job => {
            const matchesSearch = job.id.toLowerCase().includes(searchTerm) ||
                                  job.title.toLowerCase().includes(searchTerm) ||
                                  job.customer.toLowerCase().includes(searchTerm);
            
            const matchesStatus = status === 'all' || job.status === status;

            return matchesSearch && matchesStatus;
        });

        renderTable(filteredJobs);
    }
    
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'block';
    }

    window.viewApplicants = function(jobId) {
        const job = mockJobs.find(j => j.id === jobId);
        if (!job) return;

        document.getElementById('modal-job-title').textContent = `${job.title} (${job.id})`;
        const applicantsListDiv = document.getElementById('applicants-list');
        applicantsListDiv.innerHTML = ''; // Clear previous list

        if (job.applicants.length === 0) {
            applicantsListDiv.innerHTML = '<p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</p>';
        } else {
            job.applicants.forEach(applicant => {
                const item = document.createElement('div');
                item.className = 'flex items-start justify-between gap-4 p-4 bg-gray-50 rounded-lg border';
                item.innerHTML = `
                    <div class="flex-grow">
                        <h4 class="font-bold text-gray-800">${applicant.name}</h4>
                        <p class="text-sm text-gray-600 mt-1"><span class="font-medium">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∞‡∏î‡∏ß‡∏Å:</span> ${applicant.time}</p>
                        <p class="text-sm text-gray-500 mt-1"><span class="font-medium">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</span> ${applicant.note}</p>
                    </div>
                    <button onclick="assignTutor('${job.id}', '${applicant.name}')" class="bg-indigo-600 text-white px-3 py-1.5 rounded-md text-sm hover:bg-indigo-700 transition flex-shrink-0">
                        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ
                    </button>
                `;
                applicantsListDiv.appendChild(item);
            });
        }
        
        openModal('applicants-modal');
    }

    window.assignTutor = function(jobId, tutorName) {
        const job = mockJobs.find(j => j.id === jobId);
        if (job) {
            job.assignedTutor = tutorName;
            job.status = 'MATCHED';
            // Use a more modern notification instead of alert
            const notification = document.createElement('div');
            notification.className = 'fixed top-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg animate-pulse';
            notification.textContent = `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "${tutorName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!`;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 3000);

            closeModal('applicants-modal');
            filterData(); // Re-render the table to show the change
        }
    }
    
    // Add New Job Logic
    document.getElementById('add-new-job-btn').addEventListener('click', () => {
        openModal('add-job-modal');
    });

    document.getElementById('add-job-form').addEventListener('submit', (e) => {
        e.preventDefault();
        const newJob = {
            id: 'NEW' + Math.floor(Math.random() * 900 + 100),
            title: document.getElementById('job-title').value,
            customer: document.getElementById('customer-name').value,
            status: 'OPEN',
            applicants: [],
            assignedTutor: null
        };
        mockJobs.unshift(newJob); // Add to the beginning of the array
        filterData();
        closeModal('add-job-modal');
        document.getElementById('add-job-form').reset();
    });


    // Initial render and event listeners
    searchInput.addEventListener('input', filterData);
    statusFilter.addEventListener('change', filterData);
    document.addEventListener('DOMContentLoaded', () => {
        renderTable(mockJobs);
    });

</script>

</body>
</html>
